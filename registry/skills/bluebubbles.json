{
  "id": "bluebubbles",
  "name": "Bluebubbles",
  "description": "Build or update the BlueBubbles external channel plugin for CoWork-OSS (extension package, REST send/probe, webhook inbound).",
  "icon": "üí¨",
  "category": "Tools",
  "prompt": "# BlueBubbles plugin\n\nUse this skill when working on the BlueBubbles channel plugin.\n\n## Layout\n\n- Extension package: `extensions/bluebubbles/` (entry: `index.ts`).\n- Channel implementation: `extensions/bluebubbles/src/channel.ts`.\n- Webhook handling: `extensions/bluebubbles/src/monitor.ts` (register via `api.registerHttpHandler`).\n- REST helpers: `extensions/bluebubbles/src/send.ts` + `extensions/bluebubbles/src/probe.ts`.\n- Runtime bridge: `extensions/bluebubbles/src/runtime.ts` (set via `api.runtime`).\n- Catalog entry for onboarding: `src/channels/plugins/catalog.ts`.\n\n## Internal helpers (use these, not raw API calls)\n\n- `probeBlueBubbles` in `extensions/bluebubbles/src/probe.ts` for health checks.\n- `sendMessageBlueBubbles` in `extensions/bluebubbles/src/send.ts` for text delivery.\n- `resolveChatGuidForTarget` in `extensions/bluebubbles/src/send.ts` for chat lookup.\n- `sendBlueBubblesReaction` in `extensions/bluebubbles/src/reactions.ts` for tapbacks.\n- `sendBlueBubblesTyping` + `markBlueBubblesChatRead` in `extensions/bluebubbles/src/chat.ts`.\n- `downloadBlueBubblesAttachment` in `extensions/bluebubbles/src/attachments.ts` for inbound media.\n- `buildBlueBubblesApiUrl` + `blueBubblesFetchWithTimeout` in `extensions/bluebubbles/src/types.ts` for shared REST plumbing.\n\n## Webhooks\n\n- BlueBubbles posts JSON to the gateway HTTP server.\n- Normalize sender/chat IDs defensively (payloads vary by version).\n- Skip messages marked as from self.\n- Route into core reply pipeline via the plugin runtime (`api.runtime`) and `CoWork-OSS/plugin-sdk` helpers.\n- For attachments/stickers, use `<media:...>` placeholders when text is empty and attach media paths via `MediaUrl(s)` in the inbound context.\n\n## Config (core)\n\n- `channels.bluebubbles.serverUrl` (base URL), `channels.bluebubbles.password`, `channels.bluebubbles.webhookPath`.\n- Action gating: `channels.bluebubbles.actions.reactions` (default true).\n\n## Message tool notes\n\n- **Reactions:** The `react` action requires a `target` (phone number or chat identifier) in addition to `messageId`. Example: `action=react target=+15551234567 messageId=ABC123 emoji=‚ù§Ô∏è`",
  "parameters": [],
  "enabled": true,
  "metadata": {
    "routing": {
      "useWhen": "Use when the user asks to build or update the BlueBubbles external channel plugin for CoWork-OSS extension package, REST send/probe, webhook inbound.",
      "dontUseWhen": "Do not use when the request is asking for planning documents, high-level strategy, or non-executable discussion; use the relevant planning or design workflow instead.",
      "outputs": "Outcome from Bluebubbles: task-specific result plus concrete action notes.",
      "successCriteria": "Returns concrete actions and decisions matching the requested task, with no fabricated tool-side behavior."
    }
  }
}
